@model IEnumerable<AdSite.Models.CRUDModels.AdGridViewModel>
@using AdSite.Views.Shared;

@{
    string name = @Html.DisplayNameFor(model => model.Name);
    string selectedName = ViewData["CurrentColumn"]?.ToString() == name ?
        "<option selected>" + name + "</option>" :
        "<option>" + name + "</option>";

}


<p>
    <a class="btn btn-primary" asp-action="Create"><localize name="Ad_CreateNew"></localize></a>
</p>

<br />

<form asp-action="Index" method="get">
    <div class="form-actions no-color row">
        <div class="col-sm-3">
            <div class="col-sm-4">
                <localize name="General_FindBy"></localize>
            </div>
            <div class="col-sm-8">
                <select name="ColumnName" class="form-control">
                    @Html.Raw(selectedName)
                </select>
            </div>
        </div>

        <div class="col-sm-5">
            <div class="col-sm-10" style="padding-left:0px; padding-right:0px">
                <input type="text" name="SearchString" value="@ViewData["currentFilter"]" class="form-control" />
            </div>
            <div class="col-sm-2" style="padding-left:0px; padding-right:0px">
                <button type="submit" class="form-control"> <i class="fa fa-search"></i> </button>
            </div>
        </div>
    </div>
</form>

<br />

<main>
    <section class="container">
        <!--Loading ad category filters -->
        <div class="section-sb">

        </div>

        <!--Loading ad section -->
        <div class="prod-items section-items">

            @foreach (var gridAd in Model)
            {
            <div class="prodlist-i">
                <a class="prodlist-i-img" asp-action="Details" asp-route-id="@gridAd.ID">
                    @if (gridAd.MainPicture != null)
                    {
                        <img src='data:image;base64,@System.Convert.ToBase64String(gridAd.MainPicture)' />
                    }
                    else
                    {
                        <img src='http://placehold.it/300x311' />
                    }
                </a>
                <div class="prodlist-i-cont">
                    <h3><a asp-action="Details" asp-route-id="@gridAd.ID">@gridAd.Name</a></h3>
                    <div class="prodlist-i-txt">
                        @gridAd.Description
                    </div>
                    <div class="prodlist-i-action">
                        <span class="prodlist-i-price">
                            <b>$ @gridAd.Price</b>
                        </span>
                    </div>
                    <p class="prodlist-i-info">
                        <a href="#" class="prodlist-i-favorites"><i class="fa fa-heart"></i> Add to wishlist</a>
                    </p>
                </div>

                <div class="prodlist-i-props-wrap">
                    <ul class="prodlist-i-props">
                        <li>
                            <b>Owner Name</b> <i class='fa fa-user'></i> @gridAd.Owner?.UserName
                        </li>
                        <li>
                            <b>Owner Number</b> <i class='fa fa-phone'></i> @gridAd.Owner?.PhoneNumber
                        </li>
                        <li>
                            <b>Owner Mail</b> <i class='fa fa-envelope'></i> @gridAd.Owner?.Email
                        </li>
                        <li>
                            <b>City</b> <i class="fa fa-fort-awesome"></i> @gridAd.City?.Name
                        </li>
                        <li>
                            <b>Category</b> <i class="fa fa-folder-open"></i> @gridAd.Category?.Name
                        </li>
                    </ul>
                </div>

            </div>
            }
        </div>


        <ul class="pagi">
            <li class="active"><span>1</span></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li class="pagi-next"><a href="#"><i class="fa fa-angle-double-right"></i></a></li>
        </ul>


    </section>
</main>

<br />